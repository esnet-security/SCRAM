{% extends "base.html" %}

{% block content %}
  <div class="container">
    <div class="row justify-content-center">
      <div class="jumbotron w-100" style="background-color:#626366">
        <h1 class="display-3 text-center text-white font-weight-bold">SCRAM</h1>
        <hr class="my-4">
        <p class="text-center" style="color:#2ba6c8">Security Catch and Release Automation Manager</p>
      </div>
    </div>
  </div>
  {% if readwrite %}
  <div class="d-flex justify-content-center mt-2">
    <form class="w-100" action="{% url 'route_manager:add' %}" method="post">
      {% csrf_token %}
      <div class="form-row align-items-center justify-content-center">
        <div class="col-auto mb-2">
          <input class="form-control" name="route" placeholder="cidr" type="text">
        </div>
        <div class="col-auto mb-2">
          <select class="form-control" name="actiontype">
            {% for at in entries.keys %}
              {% if at.available %}
                <option>{{ at }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        <div class="col-auto mb-2">
          <input class="form-control" name="comment" placeholder="comment" type="text">
        </div>
        <div class="col-auto mb-2">
          <input class="form-control" name="expiration" type="datetime-local">
        </div>
        <div class="col-auto mb-2">
          <button class="btn btn-info" style="background-color:#2ba6c8!important;" type="submit">Add Entry</button>
        </div>
      </div>
    </form>
  </div>
  {% endif %}
  <div class="row mb-5">
    {% for actiontype, entry_list in entries.items %}
      <div class="col">
        {% if actiontype.available %}
        <h2 class="text-center mt-2">{{ actiontype.name }}
          <span class="badge badge-secondary badge-pill">{{ entry_list.active }}</span>
        </h2>
          {% for entry in entry_list.objs %}
            {% if actiontype.name|lower == entry.actiontype|lower %}
              <li class="list-group-item list-group-item-light text-center">
                <a class="link" href="{% url 'route_manager:detail' entry.id %}">
                  {{ entry }}</a></li>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endblock %}
